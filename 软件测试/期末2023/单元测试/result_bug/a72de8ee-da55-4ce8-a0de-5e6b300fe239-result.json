{"name": "测试获取所有订单:携带openid", "status": "broken", "statusDetails": {"message": "AttributeError: 'NoneType' object has no attribute 'id'", "trace": "self = <seproject_app.main.Test_1 testMethod=test71>\n\n    @allure.epic('单元')\n    @allure.feature('顾客评价模块')\n    @allure.story('顾客获取所有订单')\n    @allure.title('测试获取所有订单:携带openid')\n    @allure.description('测试登录:测试用例描述信息')\n    def test71(self):\n        '''\n        获取所有订单\n        '''\n        print()\n        n = 'test7'\n        # 接口地址\n        func = 'getAllOrders'\n        # 构造数据\n        t = _data[n]\n        headers = {\"cookie\": \"openid=oxxHL5GS26iMW6iSMzfoLjXk1luw\"}\n        i = t[1]\n        params = i['params']\n        re = i['return']\n>       r = client.get(func, params=params, headers=headers).json()\n\nseproject_app\\main.py:1092: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nd:\\anaconda\\lib\\site-packages\\starlette\\testclient.py:507: in get\n    extensions=extensions,\nd:\\anaconda\\lib\\site-packages\\httpx\\_client.py:1050: in get\n    extensions=extensions,\nd:\\anaconda\\lib\\site-packages\\starlette\\testclient.py:478: in request\n    extensions=extensions,\nd:\\anaconda\\lib\\site-packages\\httpx\\_client.py:814: in request\n    return self.send(request, auth=auth, follow_redirects=follow_redirects)\nd:\\anaconda\\lib\\site-packages\\httpx\\_client.py:905: in send\n    history=[],\nd:\\anaconda\\lib\\site-packages\\httpx\\_client.py:932: in _send_handling_auth\n    history=history,\nd:\\anaconda\\lib\\site-packages\\httpx\\_client.py:966: in _send_handling_redirects\n    response = self._send_single_request(request)\nd:\\anaconda\\lib\\site-packages\\httpx\\_client.py:1002: in _send_single_request\n    response = transport.handle_request(request)\nd:\\anaconda\\lib\\site-packages\\starlette\\testclient.py:342: in handle_request\n    raise exc\nd:\\anaconda\\lib\\site-packages\\starlette\\testclient.py:339: in handle_request\n    portal.call(self.app, scope, receive, send)\nd:\\anaconda\\lib\\site-packages\\anyio\\from_thread.py:283: in call\n    return cast(T_Retval, self.start_task_soon(func, *args).result())\nd:\\anaconda\\lib\\concurrent\\futures\\_base.py:435: in result\n    return self.__get_result()\nd:\\anaconda\\lib\\concurrent\\futures\\_base.py:384: in __get_result\n    raise self._exception\nd:\\anaconda\\lib\\site-packages\\anyio\\from_thread.py:219: in _call_func\n    retval = await retval\nd:\\anaconda\\lib\\site-packages\\fastapi\\applications.py:276: in __call__\n    await super().__call__(scope, receive, send)\nd:\\anaconda\\lib\\site-packages\\starlette\\applications.py:122: in __call__\n    await self.middleware_stack(scope, receive, send)\nd:\\anaconda\\lib\\site-packages\\starlette\\middleware\\errors.py:184: in __call__\n    raise exc\nd:\\anaconda\\lib\\site-packages\\starlette\\middleware\\errors.py:162: in __call__\n    await self.app(scope, receive, _send)\nd:\\anaconda\\lib\\site-packages\\starlette\\middleware\\exceptions.py:79: in __call__\n    raise exc\nd:\\anaconda\\lib\\site-packages\\starlette\\middleware\\exceptions.py:68: in __call__\n    await self.app(scope, receive, sender)\nd:\\anaconda\\lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py:21: in __call__\n    raise e\nd:\\anaconda\\lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py:18: in __call__\n    await self.app(scope, receive, send)\nd:\\anaconda\\lib\\site-packages\\starlette\\routing.py:718: in __call__\n    await route.handle(scope, receive, send)\nd:\\anaconda\\lib\\site-packages\\starlette\\routing.py:276: in handle\n    await self.app(scope, receive, send)\nd:\\anaconda\\lib\\site-packages\\starlette\\routing.py:66: in app\n    response = await func(request)\nd:\\anaconda\\lib\\site-packages\\fastapi\\routing.py:238: in app\n    dependant=dependant, values=values, is_coroutine=is_coroutine\nd:\\anaconda\\lib\\site-packages\\fastapi\\routing.py:165: in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\nd:\\anaconda\\lib\\site-packages\\starlette\\concurrency.py:41: in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\nd:\\anaconda\\lib\\site-packages\\anyio\\to_thread.py:32: in run_sync\n    func, *args, cancellable=cancellable, limiter=limiter\nd:\\anaconda\\lib\\site-packages\\anyio\\_backends\\_asyncio.py:937: in run_sync_in_worker_thread\n    return await future\nd:\\anaconda\\lib\\site-packages\\anyio\\_backends\\_asyncio.py:867: in run\n    result = context.run(func, *args)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndb = <sqlalchemy.orm.session.Session object at 0x0000015299F46A88>, openid = 'oxxHL5GS26iMW6iSMzfoLjXk1luw'\n\n    @app.get(\n        \"/getAllOrders\",\n        response_model=schemas.OrderDict,\n        summary=\"顾客获取全部订单\",\n        description=\"返回顾客创建的所有订单\",\n        tags=[\"GuestCommentController\"],\n    )\n    # 顾客获取自己的全部订单\n    def GetAllOrders(db: Session = Depends(get_db), openid: Optional[str] = Cookie(None)):\n        if not openid:\n            raise HTTPException(status_code=401, detail=\"please login first\")\n    \n        user = crud.get_user_by_openid(db, openid)\n        return schemas.OrderDict(\n>           msg=\"succeed\", data=crud.get_orders_by_user_id(db, user.id)\n        )\nE       AttributeError: 'NoneType' object has no attribute 'id'\n\nseproject_app\\main.py:230: AttributeError"}, "description": "测试登录:测试用例描述信息", "attachments": [{"name": "log", "source": "68e6a322-adde-46d8-b526-6fbeccb080fb-attachment.txt", "type": "text/plain"}, {"name": "stdout", "source": "9e360098-94ca-4e40-9677-1d050e5b9325-attachment.txt", "type": "text/plain"}], "start": 1684130128843, "stop": 1684130128851, "uuid": "7817a423-6de6-4817-a258-de93f1d70967", "historyId": "2b624ba2ab978df08e8159bb30ae656f", "testCaseId": "2b624ba2ab978df08e8159bb30ae656f", "fullName": "seproject_app.main.Test_1#test71", "labels": [{"name": "story", "value": "顾客获取所有订单"}, {"name": "epic", "value": "单元"}, {"name": "feature", "value": "顾客评价模块"}, {"name": "parentSuite", "value": "seproject_app"}, {"name": "suite", "value": "main"}, {"name": "subSuite", "value": "Test_1"}, {"name": "host", "value": "whz"}, {"name": "thread", "value": "13772-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "seproject_app.main"}]}